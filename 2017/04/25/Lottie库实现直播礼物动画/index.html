<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="android,github,æŠ€æœ¯åšå®¢,ç§»åŠ¨å¼€å‘,google"><title>Lottieåº“å®ç°ç›´æ’­ç¤¼ç‰©åŠ¨ç”» | LiuJun</title><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/5.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/grids-responsive-min.css"><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Lottieåº“å®ç°ç›´æ’­ç¤¼ç‰©åŠ¨ç”»</h1><a id="logo" href="/.">LiuJun</a><p class="description">é¡ºå…¶è‡ªç„¶</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> é¦–é¡µ</i></a><a href="/archives/"><i class="fa fa-archive"> å½’æ¡£</i></a><a href="/about/"><i class="fa fa-user"> å…³äº</i></a><a href="/atom.xml"><i class="fa fa-rss"> è®¢é˜…</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">Lottieåº“å®ç°ç›´æ’­ç¤¼ç‰©åŠ¨ç”»</h1><div class="post-meta">Apr 25, 2017<script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span></div><a data-thread-key="2017/04/25/Lottieåº“å®ç°ç›´æ’­ç¤¼ç‰©åŠ¨ç”»/" href="/2017/04/25/Lottieåº“å®ç°ç›´æ’­ç¤¼ç‰©åŠ¨ç”»/#comments" class="ds-thread-count"></a><div class="post-content"><p><a href="https://github.com/airbnb/lottie-android" target="_blank" rel="external">Lottie</a> åº“æˆ‘å°±ä¸ä»‹ç»äº†ï¼Œä¸äº†è§£çš„å¯ä»¥çœ‹ä¸‹è¿™ç¯‡æ–‡ç« <a href="https://juejin.im/entry/589ba3fc128fe1005801704b" target="_blank" rel="external">Airbnb å¼€æºç‚«é…·åŠ¨ç”»åº“ Lottieï¼ˆè¯‘ï¼‰ï¼çœ‹çœ‹ Airbnb çš„å·¥ç¨‹å¸ˆæ€ä¹ˆè¯´</a></p>
<p><code>Lottie æ”¯æŒ Androidã€iOSã€React Native å¹³å°ï¼Œæ”¯æŒå®æ—¶æ¸²æŸ“ After Effects åŠ¨ç”»ï¼Œä½¿å¾— app ä¸­ä½¿ç”¨åŠ¨ç”»å¯ä»¥åƒä½¿ç”¨é™æ€èµ„æºä¸€æ ·ç®€å•ã€‚</code></p>
<h2 id="u4F7F_u7528_u573A_u666F"><a href="#u4F7F_u7528_u573A_u666F" class="headerlink" title="ä½¿ç”¨åœºæ™¯"></a>ä½¿ç”¨åœºæ™¯</h2><p>ä¼—æ‰€å‘¨çŸ¥ï¼Œåšç›´æ’­è½¯ä»¶è‚¯å®šå°‘ä¸äº†å„ç§ç¤¼ç‰©çš„åŠ¨ç”»æ•ˆæœï¼Œå½“ä¸Šçº¿æ–°çš„ç¤¼ç‰©æ—¶ï¼Œä¸ä»… Androidã€ios éœ€è¦å®ç°æ–°çš„åŠ¨ç”»æ•ˆæœï¼Œè¿˜å¾ˆéš¾å…¼å®¹è€ç‰ˆæœ¬ã€‚ç°åœ¨æœ‰äº† Lottieï¼Œå¯ä»¥è®©è®¾è®¡å¸ˆä½¿ç”¨ After Effects è¿›è¡ŒåŠ¨ç”»è®¾è®¡ï¼Œé€šè¿‡ Bodymovin æ’ä»¶å¯¼å‡º json æ–‡ä»¶ï¼Œå°†åŠ¨ç”»èµ„æºæ‰“åŒ…ä¸Šä¼ åˆ°æœåŠ¡å™¨åï¼Œå®¢æˆ·ç«¯é€šè¿‡åŠ¨æ€ä¸‹è½½èµ„æºæ–‡ä»¶æ¥æ‰§è¡ŒåŠ¨ç”»ã€‚è¿™æ ·ä¸Šçº¿æ–°çš„ç¤¼ç‰©ï¼Œåªéœ€è¦å°†èµ„æºæ–‡ä»¶ä¸Šä¼ ï¼Œå®¢æˆ·ç«¯ä¸éœ€è¦å‘ç‰ˆå®Œå…¨å¯ä»¥æ‰§è¡Œæ–°ç¤¼ç‰©çš„åŠ¨ç”»æ•ˆæœã€‚</p>
<h2 id="u4F7F_u7528_u8BE6_u89E3"><a href="#u4F7F_u7528_u8BE6_u89E3" class="headerlink" title="ä½¿ç”¨è¯¦è§£"></a>ä½¿ç”¨è¯¦è§£</h2><p>å…ˆçœ‹ä¸‹åŠ¨ç”»æ•ˆæœï¼š</p>
<p><img src="https://mmbiz.qlogo.cn/mmbiz_gif/5MJZPMAX957mRHzicibvoEHbIUichBfvMKHRMwCFBzOQsZSLPY2GibsKkUF0iaVvnXicOz0uia7EOGDAost6ibib7ialQGiaA/0?wx_fmt=gif" alt="å¹½çµåŠ¨ç”»æ•ˆæœ"></p>
<p>å…·ä½“æ€ä¹ˆå®ç°å‘¢ï¼Ÿåˆ«ç€æ€¥ï¼Œå…ˆæ¥äº†è§£ä¸€ä¸‹åŠ¨ç”»èµ„æºæ–‡ä»¶çš„ç»“æ„ã€‚ç”±äºç›´æ’­é—´é€å‡ºçš„å¤§ç¤¼ç‰©ä¸€èˆ¬éƒ½æ˜¯é£æœºã€è·‘è½¦ã€èˆªæ¯ã€èŠ±ç“£é›¨ç­‰ç‰©å“ï¼Œè¿™äº›ç‰©å“ä¸æ˜¯ç®€å•çš„çº¿æ¡ã€è‰²å—èƒ½å¤Ÿç»˜åˆ¶çš„å‡ºæ¥ï¼Œæ‰€ä»¥ä½¿ç”¨å›¾ç‰‡æ–‡ä»¶æ¥å®ç°åŠ¨ç”»æ•ˆæœã€‚</p>
<p>è¿™æ ·ä¸€æ¥è®¾è®¡å¸ˆå¯¼å‡ºæ¥çš„åŠ¨ç”»èµ„æºåŒ…æ‹¬ä¸€ä¸ª json æ–‡ä»¶å’Œä¸€ç»„å›¾ç‰‡æ–‡ä»¶ï¼š</p>
<p><img src="https://mmbiz.qlogo.cn/mmbiz_png/5MJZPMAX957mRHzicibvoEHbIUichBfvMKH1QICgdxYRibg3k2Q15rhPtamoxD2Ae59XtjtQ6QxAjweVhoCQic4nVWQ/0?wx_fmt=png" alt="èµ„æºæ–‡ä»¶ç›®å½•"></p>
<p>å°†è¿™äº›æ–‡ä»¶æ‰“æˆå‹ç¼©åŒ…ä¸Šä¼ åˆ°åå°ï¼Œå®¢æˆ·ç«¯ä¸‹è½½å‹ç¼©åŒ…è¿›è¡Œè§£å‹ï¼Œä½¿ç”¨ Lottie åŠ è½½æœ¬åœ°èµ„æºæ‰§è¡ŒåŠ¨ç”»ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">File jsonFile = <span class="keyword">new</span> File(giftDir, <span class="string">"79.json"</span>);</span><br><span class="line">File imagesDir = <span class="keyword">new</span> File(giftDir, <span class="string">"images"</span>);</span><br><span class="line">FileInputStream fis = <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">if</span> (jsonFile.exists()) &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        fis = <span class="keyword">new</span> FileInputStream(jsonFile);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (FileNotFoundException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (fis == <span class="keyword">null</span> || !imagesDir.exists()) &#123;</span><br><span class="line">    showLocalAnimation(gift);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">final</span> String absolutePath = imagesDir.getAbsolutePath();</span><br><span class="line"><span class="comment">//æä¾›ä¸€ä¸ªä»£ç†æ¥å£ä» SD å¡è¯»å– images ä¸‹çš„å›¾ç‰‡</span></span><br><span class="line">mLottieAnimationView.setImageAssetDelegate(<span class="keyword">new</span> ImageAssetDelegate() &#123;</span><br><span class="line">    <span class="annotation">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Bitmap <span class="title">fetchBitmap</span><span class="params">(LottieImageAsset asset)</span> </span>&#123;</span><br><span class="line">        BitmapFactory.Options opts = <span class="keyword">new</span> BitmapFactory.Options();</span><br><span class="line">        opts.inScaled = <span class="keyword">true</span>;</span><br><span class="line">        opts.inDensity = <span class="number">160</span>;</span><br><span class="line">        <span class="keyword">return</span> BitmapFactory.decodeFile(absolutePath + File.separator +</span><br><span class="line">                asset.getFileName(), opts);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//ä»æ–‡ä»¶æµä¸­åŠ è½½ json æ•°æ®</span></span><br><span class="line">LottieComposition.Factory.fromInputStream(<span class="keyword">this</span>, fis, <span class="keyword">new</span> OnCompositionLoadedListener() &#123;</span><br><span class="line">    <span class="annotation">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCompositionLoaded</span><span class="params">(LottieComposition composition)</span> </span>&#123;</span><br><span class="line">        mLottieAnimationView.setVisibility(View.VISIBLE);</span><br><span class="line">        mLottieAnimationView.setComposition(composition);</span><br><span class="line">        mLottieAnimationView.playAnimation();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>å…³é”®çš„ä»£ç å°±æ˜¯è®¾ç½®å›¾ç‰‡èµ„æºä»£ç†ï¼Œå» SD å¡è§£æå›¾ç‰‡æ–‡ä»¶ï¼Œé‚£ä¹ˆæ€ä¹ˆçŸ¥é“è¯¥è§£æå“ªä¸€å¼ å›¾ç‰‡å‘¢ï¼Ÿå’±ä»¬æ¥çœ‹çœ‹ json æ–‡ä»¶é‡Œé¢çš„å†…å®¹ï¼š</p>
<p><img src="https://mmbiz.qlogo.cn/mmbiz_jpg/5MJZPMAX957mRHzicibvoEHbIUichBfvMKHdKmIT8UtrmrKMwzrsCvbyb8micqOYj4BwXFR9Koq4rwZE8Ihpibc3e0g/0?wx_fmt=jpeg" alt="jsonæ–‡ä»¶"></p>
<p><code>assets</code> å­—æ®µæ˜¯å›¾ç‰‡èµ„æºçš„æ•°ç»„ï¼Œå…·ä½“çš„è§£æçš„æºç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="title">LottieImageAsset</span><span class="params">(<span class="keyword">int</span> width, <span class="keyword">int</span> height, String id, String fileName)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.width = width;</span><br><span class="line">    <span class="keyword">this</span>.height = height;</span><br><span class="line">    <span class="keyword">this</span>.id = id;</span><br><span class="line">    <span class="keyword">this</span>.fileName = fileName;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Factory</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Factory</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">static</span> LottieImageAsset <span class="title">newInstance</span><span class="params">(JSONObject imageJson)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> LottieImageAsset(</span><br><span class="line">                  imageJson.optInt(<span class="string">"w"</span>),     <span class="comment">//width</span></span><br><span class="line">                  imageJson.optInt(<span class="string">"h"</span>),     <span class="comment">//height</span></span><br><span class="line">                  imageJson.optString(<span class="string">"id"</span>), <span class="comment">//id</span></span><br><span class="line">                  imageJson.optString(<span class="string">"p"</span>)   <span class="comment">//fileName</span></span><br><span class="line">               );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç›´æ¥æ ¹æ® <code>ImageAssetDelegate</code> ä»£ç†ç±»çš„ <code>fetchBitmap(LottieImageAsset asset)</code> æ–¹æ³•ä¸­çš„ <code>LottieImageAsset</code> å‚æ•°è·å–å½“å‰éœ€è¦è§£æçš„å›¾ç‰‡æ–‡ä»¶åï¼Œå» images æ–‡ä»¶å¤¹ä¸‹é¢è§£æå¯¹åº”çš„æ–‡ä»¶å°±OKå•¦ã€‚</p>
<p>è¿™å‡ è¡Œä»£ç å°±å®ç°äº†ä»SDå¡åŠ¨æ€åŠ è½½åŠ¨ç”»ï¼Œé‚£ä¹ˆè¿™æ ·å°±ç®—å®Œå·¥äº†å—ï¼Ÿçœ‹çœ‹ä¸Šé¢çš„åŠ¨ç”»æ˜¯ä¸æ˜¯æ„Ÿè§‰æœ‰ä»€ä¹ˆåœ°æ–¹ä¸å¯¹åŠ²ï¼Ÿ<br>å¥½å§ï¼Œä½œä¸ºä¸€ä¸ªAndroidè½¯ä»¶å·¥ç¨‹å¸ˆï¼Œä¸€å®šè¦è®°ä½2ä¸ªå­— <strong>é€‚é…</strong> <strong>é€‚é…</strong> <strong>é€‚é…</strong></p>
<h2 id="u6E90_u7801_u89E3_u6790"><a href="#u6E90_u7801_u89E3_u6790" class="headerlink" title="æºç è§£æ"></a>æºç è§£æ</h2><p>åŠ¨ç”»æ˜¯å…¨å±çš„æ•ˆæœï¼Œå°å¹½çµä¹Ÿæ˜¯ä»å±å¹•å¤–é£è¿›æ¥çš„æ²¡æœ‰é—®é¢˜ï¼Œä¸ºä»€ä¹ˆèƒŒæ™¯å›¾ç¦»å±å¹•ä¸¤è¾¹æœ‰ç©ºéš™å‘¢ï¼Ÿ</p>
<p><img src="https://mmbiz.qlogo.cn/mmbiz_png/5MJZPMAX957mRHzicibvoEHbIUichBfvMKHXxiaFpU9EkWEM8NgVROH3Ia5OHl6vMj9xEoJqKnr3VmEXDJXtaJZic0g/0?wx_fmt=png" alt="æ²¡æœ‰é€‚é…"></p>
<p>å†æ¥çœ‹çœ‹è¿™ä¸ªåŠ¨å›¾ï¼Œ<strong>ä¸ºä»€ä¹ˆéšè—è™šæ‹ŸæŒ‰é”®å°±å…¨å±äº†å‘¢ï¼Ÿ</strong></p>
<p><img src="https://mmbiz.qlogo.cn/mmbiz_gif/5MJZPMAX957mRHzicibvoEHbIUichBfvMKHfrsFSSYqOCKoXMoZficF2ibBoJRmJvgxgafA3e3ibw02nrY98IEvCoe1w/0?wx_fmt=gif" alt="éšè—è™šæ‹ŸæŒ‰é”®"></p>
<p>å†æ¥çœ‹çœ‹ json æ–‡ä»¶é‡Œé¢çš„å†…å®¹ï¼š</p>
<p><img src="https://mmbiz.qlogo.cn/mmbiz_jpg/5MJZPMAX957mRHzicibvoEHbIUichBfvMKHbvopnE0xKiaibxSU9QdNvES3WQBp2g46RO288PEovlavjAwW6uP6dDqg/0?wx_fmt=jpeg" alt="jsonæ–‡ä»¶"></p>
<p>èƒŒæ™¯å›¾çš„å®½é«˜å’Œç”»å¸ƒçš„å®½é«˜æ˜¯ä¸€æ ·çš„ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆæœ‰è™šæ‹ŸæŒ‰é”®çš„æ—¶å€™èƒŒæ™¯å›¾å°±ä¸å…¨å±å‘¢ï¼ŸåŸå› å…¶å®å¾ˆç®€å•ï¼ˆç„¶è€Œæ‰¾äº†åŠå¤©æ‰æ‰¾åˆ°åŸå› ğŸ˜…ï¼‰ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹æºç ï¼ŒLottieAnimationView åŠ è½½ Composition æ—¶åˆ¤æ–­äº†ç”»å¸ƒçš„å®½é«˜å¦‚æœå¤§äºæ‰‹æœºå±å¹•çš„å®½é«˜å°±è¿›è¡Œç­‰æ¯”ä¾‹ç¼©å°ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setComposition</span><span class="params">(@NonNull LottieComposition composition)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (L.DBG) &#123;</span><br><span class="line">      Log.v(TAG, <span class="string">"Set Composition \n"</span> + composition);</span><br><span class="line">    &#125;</span><br><span class="line">    lottieDrawable.setCallback(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">boolean</span> isNewComposition = lottieDrawable.setComposition(composition);</span><br><span class="line">    <span class="keyword">if</span> (!isNewComposition) &#123;</span><br><span class="line">      <span class="comment">// We can avoid re-setting the drawable, and invalidating the view, since the composition</span></span><br><span class="line">      <span class="comment">// hasn't changed.</span></span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//é‡ç‚¹åœ¨è¿™é‡Œï¼Œæ ¹æ®å±å¹•å®½é«˜å¯¹ç”»å¸ƒè¿›è¡Œç­‰æ¯”ä¾‹ç¼©æ”¾</span></span><br><span class="line">    <span class="keyword">int</span> screenWidth = Utils.getScreenWidth(getContext());</span><br><span class="line">    <span class="keyword">int</span> screenHeight = Utils.getScreenHeight(getContext());</span><br><span class="line">    <span class="keyword">int</span> compWidth = composition.getBounds().width();</span><br><span class="line">    <span class="keyword">int</span> compHeight = composition.getBounds().height();</span><br><span class="line">    <span class="comment">//å¦‚æœç”»å¸ƒçš„å®½é«˜å¤§äºå±å¹•å®½é«˜ï¼Œè®¡ç®—ç¼©æ”¾æ¯”</span></span><br><span class="line">    <span class="keyword">if</span> (compWidth &gt; screenWidth ||</span><br><span class="line">        compHeight &gt; screenHeight) &#123;</span><br><span class="line">      <span class="keyword">float</span> xScale = screenWidth / (<span class="keyword">float</span>) compWidth;</span><br><span class="line">      <span class="keyword">float</span> yScale = screenHeight / (<span class="keyword">float</span>) compHeight;</span><br><span class="line">      <span class="comment">//æŒ‰æ¯”ä¾‹ç¼©å°</span></span><br><span class="line">      setScale(Math.max(xScale, yScale));</span><br><span class="line">      Log.w(L.TAG, String.format(</span><br><span class="line">          <span class="string">"Composition larger than the screen %dx%d vs %dx%d. Scaling down."</span>,</span><br><span class="line">          compWidth, compHeight, screenWidth, screenHeight));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// If you set a different composition on the view, the bounds will not update unless</span></span><br><span class="line">    <span class="comment">// the drawable is different than the original.</span></span><br><span class="line">    setImageDrawable(<span class="keyword">null</span>);</span><br><span class="line">    setImageDrawable(lottieDrawable);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.composition = composition;</span><br><span class="line"></span><br><span class="line">    requestLayout();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è®¡ç®—å‡ºç¼©æ”¾æ¯”åï¼Œè°ƒç”¨ setScale æ–¹æ³•å°†ç¼©æ”¾æ¯”è®¾ç½®åˆ° lottieDrawable ä¸Šï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setScale</span><span class="params">(<span class="keyword">float</span> scale)</span> </span>&#123;</span><br><span class="line">    lottieDrawable.setScale(scale);</span><br><span class="line">    <span class="keyword">if</span> (getDrawable() == lottieDrawable) &#123;</span><br><span class="line">      setImageDrawable(<span class="keyword">null</span>);</span><br><span class="line">      setImageDrawable(lottieDrawable);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>lottieDrawable çš„ setScale æ–¹æ³•ä¿å­˜äº†ç¼©æ”¾æ¯”ï¼Œå¹¶ä¸”æ›´æ–°äº†ç»˜åˆ¶çš„çŸ©å½¢èŒƒå›´ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setScale</span><span class="params">(<span class="keyword">float</span> scale)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.scale = scale;</span><br><span class="line">    updateBounds();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œå¯ä»¥çœ‹åˆ°çŸ©å½¢çš„èŒƒå›´æ˜¯æ ¹æ®ç”»å¸ƒçš„å®½é«˜è¿›è¡Œäº†ç­‰æ¯”ä¾‹çš„ç¼©æ”¾</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">updateBounds</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (composition == <span class="keyword">null</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    setBounds(<span class="number">0</span>, <span class="number">0</span>, (<span class="keyword">int</span>) (composition.getBounds().width() * scale),</span><br><span class="line">        (<span class="keyword">int</span>) (composition.getBounds().height() * scale));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç°åœ¨ç”»å¸ƒè¢«ç¼©æ”¾äº†ï¼Œç„¶è€ŒèƒŒæ™¯å›¾å‘¢ï¼Ÿæ¥çœ‹ä¸€ä¸‹ lottieDrawable çš„ç»˜åˆ¶ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">draw</span><span class="params">(@NonNull Canvas canvas)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (compositionLayer == <span class="keyword">null</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    matrix.reset();</span><br><span class="line">    matrix.preScale(scale, scale);</span><br><span class="line">    compositionLayer.draw(canvas, matrix, alpha);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>ç»˜åˆ¶çš„æ—¶å€™å¯¹ matrix è®¾ç½®ç¼©æ”¾æ¯”ï¼Œç„¶åè°ƒç”¨äº† compositionLayer å»è¿›è¡Œå…·ä½“çš„ç»˜åˆ¶ï¼Œè¿™ä¸ª compositionLayer ä¸­æœ‰ä¸€ä¸ªé›†åˆ <code>private final List&lt;BaseLayer&gt; layers = new ArrayList&lt;&gt;();</code> å°±æ˜¯ json æ–‡ä»¶é‡Œé¢çš„ <code>layers</code> èŠ‚ç‚¹è§£æå‡ºæ¥çš„å›¾å±‚åˆ—è¡¨ï¼Œå…¶ä¸­è¿˜åŒ…å«ä¸€äº›å±æ€§åŠ¨ç”»ã€‚<code>compositionLayer.draw(canvas, matrix, alpha);</code> æ–¹æ³•ä¸­ä¸»è¦è°ƒç”¨äº† drawLayer æŠ½è±¡æ–¹æ³•ç”±å›¾å±‚çš„å…·ä½“å®ç°ç±»æ‰§è¡Œç»˜åˆ¶ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">drawLayer</span><span class="params">(Canvas canvas, Matrix parentMatrix, <span class="keyword">int</span> parentAlpha)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = layers.size() - <span class="number">1</span>; i &gt;= <span class="number">0</span> ; i--) &#123;</span><br><span class="line">      layers.get(i).draw(canvas, parentMatrix, parentAlpha);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>CompositionLayer ç±»æ˜¯å¤åˆå±‚ï¼Œéå† layers é›†åˆä¸€å±‚ä¸€å±‚çš„è¿›è¡Œç»˜åˆ¶ï¼Œè€Œæˆ‘ä»¬æ˜¯ä½¿ç”¨å›¾ç‰‡æ–‡ä»¶åšçš„åŠ¨ç”»ï¼Œå¯¹åº”çš„ Layer å®ç°ç±»ä¸º ImageLayerã€‚ æˆ‘ä»¬çœ‹ä¸‹ ImageLayer çš„ç»˜åˆ¶æ–¹æ³•ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">drawLayer</span><span class="params">(@NonNull Canvas canvas, Matrix parentMatrix, <span class="keyword">int</span> parentAlpha)</span> </span>&#123;</span><br><span class="line">    Bitmap bitmap = getBitmap();</span><br><span class="line">    <span class="keyword">if</span> (bitmap == <span class="keyword">null</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    paint.setAlpha(parentAlpha);</span><br><span class="line">    canvas.save();</span><br><span class="line">    canvas.concat(parentMatrix);</span><br><span class="line">    src.set(<span class="number">0</span>, <span class="number">0</span>, bitmap.getWidth(), bitmap.getHeight());</span><br><span class="line">    dst.set(<span class="number">0</span>, <span class="number">0</span>, (<span class="keyword">int</span>) (bitmap.getWidth() * density), (<span class="keyword">int</span>) (bitmap.getHeight() * density));</span><br><span class="line">    canvas.drawBitmap(bitmap, src, dst , paint);</span><br><span class="line">    canvas.restore();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>getBitmap() æ–¹æ³•ä¼šè°ƒç”¨åˆ°ä¸€å¼€å§‹è®¾ç½®çš„ä»£ç†ç±» ImageAssetDelegate ï¼Œè·å–åˆ°ä» SD å¡è¯»å–åˆ°çš„å›¾ç‰‡ã€‚  </p>
<p>çœ‹ä»£ç ä¸­è°ƒç”¨äº† canvas çš„ <code>save</code>ã€<code>restore</code> æ–¹æ³•æ¥è¿›è¡Œå›¾å±‚çš„å åŠ ç»˜åˆ¶ï¼ŒlottieDrawable çš„ <code>draw</code> æ–¹æ³•ä¼ é€’ä¸‹æ¥çš„ <code>matrix</code> ç”¨åˆ°äº† <code>concat</code> æ–¹æ³•ä¸Šï¼Œå¯¹ bitmap è¿›è¡Œäº†ç­‰æ¯”å‹ç¼©ã€‚ç°åœ¨æˆ‘ä»¬çŸ¥é“ç”»å¸ƒå’Œ bitmap éƒ½æ ¹æ®å±å¹•çš„å®½é«˜è¿›è¡Œäº†ç­‰æ¯”ç¼©æ”¾ï¼Œè€Œæˆ‘ä»¬éšè—è™šæ‹ŸæŒ‰é”®æ—¶ï¼ŒèƒŒæ™¯å›¾ç‰‡ç¼©æ”¾çš„å¤§å°å’Œå±å¹•å®½é«˜æ˜¯å»åˆçš„ï¼Œæ˜¾ç¤ºè™šæ‹ŸæŒ‰é”®æ—¶ï¼ŒèƒŒæ™¯å›¾ç‰‡ç¼©æ”¾åçš„é«˜åº¦å’Œå±å¹•é«˜åº¦ä¸€æ ·ï¼Œä½†æ˜¯å®½åº¦æ¯”å±å¹•çš„å®½åº¦è¦å°ï¼Œæ‰€ä»¥ä¸¤è¾¹å°±æœ‰é—´è·ã€‚</p>
<p>å½’æ ¹ç»“åº•å°±æ˜¯ä¸€å¥è¯ï¼š<br><strong>èƒŒæ™¯å›¾çš„é•¿å®½æ¯”æ˜¯ 16 : 9ï¼Œæ‰‹æœºå±å¹•çš„é•¿å®½æ¯”ä¹Ÿæ˜¯ 16 : 9ï¼Œä½†æ˜¯å› ä¸ºåº•éƒ¨çš„è™šæ‹ŸæŒ‰é”®å äº†ä¸€éƒ¨åˆ†çš„é«˜åº¦ï¼Œå±å¹•çš„å¯ç”¨ç©ºé—´çš„é•¿å®½æ¯”å¤§çº¦ä¸º 3 : 2</strong><br><strong>16 : 9 çš„å›¾ç‰‡å†æ€ä¹ˆç­‰æ¯”ç¼©æ”¾ä¹Ÿä¸èƒ½é“ºæ»¡ 3 : 2 çš„å±å¹•å•Š</strong></p>
<h2 id="u5168_u5C4F_u9002_u914D"><a href="#u5168_u5C4F_u9002_u914D" class="headerlink" title="å…¨å±é€‚é…"></a>å…¨å±é€‚é…</h2><p>å› ä¸ºç”»å¸ƒçš„é•¿å®½æ¯”æ˜¯ 16 : 9 ï¼Œé‚£ä¹ˆåªæœ‰åœ¨æ‰‹æœºåˆ†è¾¨ç‡ä¸æ˜¯ 16 : 9 æˆ–è€…å¸¦è™šæ‹ŸæŒ‰é”®çš„æ‰‹æœºä¸Šä¼šæœ‰è¿™ä¸ªé—®é¢˜ã€‚</p>
<h3 id="u65B9_u6848_u4E00"><a href="#u65B9_u6848_u4E00" class="headerlink" title="æ–¹æ¡ˆä¸€"></a>æ–¹æ¡ˆä¸€</h3><p>åœ¨æ‰§è¡ŒåŠ¨ç”»çš„ç•Œé¢éšè—è™šæ‹ŸæŒ‰é”®ï¼Œæˆ–è€…å°†è™šæ‹ŸæŒ‰é”®è®¾ç½®ä¸ºé€æ˜æµ®åœ¨å¸ƒå±€ä¸Šé¢ï¼Œè¿™æ ·å±å¹•çš„é•¿å®½æ¯”å’Œç”»å¸ƒçš„é•¿å®½æ¯”ä¸€æ ·å°±æ²¡æœ‰é—®é¢˜ã€‚ç›®å‰å¸‚é¢ä¸Šçš„æ‰‹æœºåŸºæœ¬ä¸Šéƒ½æ˜¯ 720Pã€1080Pã€2K ç­‰åˆ†è¾¨ç‡ï¼Œè¿™äº›åˆ†è¾¨ç‡éƒ½æ˜¯ 16 : 9 çš„å°ºå¯¸ã€‚</p>
<p>è®¾ç½®ä¸»é¢˜ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">style</span> <span class="attribute">name</span>=<span class="value">"Theme"</span>&gt;</span><span class="css"></span><br><span class="line">        &lt;<span class="tag">item</span> <span class="tag">name</span>="<span class="tag">android</span><span class="pseudo">:windowTranslucentStatus"</span>&gt;<span class="tag">true</span>&lt;/<span class="tag">item</span>&gt;</span><br><span class="line">        &lt;<span class="tag">item</span> <span class="tag">name</span>="<span class="tag">android</span><span class="pseudo">:windowTranslucentNavigation"</span>&gt;<span class="tag">true</span>&lt;/<span class="tag">item</span>&gt;</span><br><span class="line"></span><span class="tag">&lt;/<span class="title">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ä»£ç è®¾ç½®ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Window window = getWindow();</span><br><span class="line"><span class="keyword">int</span> visibility = View.SYSTEM_UI_FLAG_LOW_PROFILE |</span><br><span class="line">    View.SYSTEM_UI_FLAG_HIDE_NAVIGATION;</span><br><span class="line"><span class="keyword">if</span> (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) &#123;</span><br><span class="line">    window.clearFlags(WindowManager.LayoutParams.FLAG_TRANSLUCENT_STATUS);</span><br><span class="line">    window.addFlags(WindowManager.LayoutParams.FLAG_DRAWS_SYSTEM_BAR_BACKGROUNDS);</span><br><span class="line">    window.setStatusBarColor(ContextCompat.getColor(<span class="keyword">this</span>, android.R.color.transparent));</span><br><span class="line">    visibility |= View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN |</span><br><span class="line">                    View.SYSTEM_UI_FLAG_LAYOUT_STABLE |</span><br><span class="line">                    View.SYSTEM_UI_FLAG_IMMERSIVE_STICKY;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.KITKAT) &#123;</span><br><span class="line">    window.addFlags(WindowManager.LayoutParams.FLAG_TRANSLUCENT_STATUS);</span><br><span class="line">    visibility |= View.SYSTEM_UI_FLAG_IMMERSIVE_STICKY;</span><br><span class="line">&#125;</span><br><span class="line">window.getDecorView().setSystemUiVisibility(visibility);</span><br></pre></td></tr></table></figure>
<h3 id="u65B9_u6848_u4E8C"><a href="#u65B9_u6848_u4E8C" class="headerlink" title="æ–¹æ¡ˆäºŒ"></a>æ–¹æ¡ˆäºŒ</h3><p>å¦‚æœé“äº†å¿ƒè¦é€‚é…ä¸æ˜¯ 16 : 9 å±å¹•çš„æ‰‹æœºï¼Œé‚£ä¹ˆä¹Ÿæ˜¯èƒ½å¤Ÿå®ç°çš„ğŸ˜†ğŸ˜† å…ˆè§£æ JSONObject ç„¶åå¯¹æ¯”å±å¹•çš„é•¿å®½æ¯”å’Œç”»å¸ƒçš„é•¿å®½æ¯”ç›¸å·®è¶…è¿‡ 0.01ï¼Œå°±æ ¹æ®å±å¹•é•¿å®½æ¯”ä¿®æ”¹ç”»å¸ƒçš„é«˜åº¦ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">InputStream stream = <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    stream = getAssets().open(<span class="string">"79.json"</span>);</span><br><span class="line">    <span class="keyword">int</span> size = stream.available();</span><br><span class="line">    <span class="keyword">byte</span>[] buffer = <span class="keyword">new</span> <span class="keyword">byte</span>[size];</span><br><span class="line">    stream.read(buffer);</span><br><span class="line">    String json = <span class="keyword">new</span> String(buffer, <span class="string">"UTF-8"</span>);</span><br><span class="line">    JSONObject jsonObject = <span class="keyword">new</span> JSONObject(json);</span><br><span class="line">    DisplayMetrics displayMetrics = <span class="keyword">new</span> DisplayMetrics();</span><br><span class="line">    WindowManager wm = (WindowManager) getApplicationContext().getSystemService(Context.WINDOW_SERVICE);</span><br><span class="line">    wm.getDefaultDisplay().getMetrics(displayMetrics);</span><br><span class="line">    <span class="keyword">float</span> displayScaled = displayMetrics.heightPixels / (<span class="keyword">float</span>) displayMetrics.widthPixels;</span><br><span class="line">    <span class="keyword">int</span> w = jsonObject.optInt(<span class="string">"w"</span>);</span><br><span class="line">    <span class="keyword">int</span> h = jsonObject.optInt(<span class="string">"h"</span>);</span><br><span class="line">    <span class="keyword">float</span> scaled = h / (<span class="keyword">float</span>) w;</span><br><span class="line">    <span class="keyword">if</span> (Math.abs(displayScaled - scaled) &gt; <span class="number">0.01F</span>) &#123;</span><br><span class="line">        jsonObject.put(<span class="string">"h"</span>, (<span class="keyword">int</span>) (w * displayScaled));</span><br><span class="line">    &#125;</span><br><span class="line">    mLottieAnimationView.setAnimation(jsonObject);</span><br><span class="line">    mLottieAnimationView.setImageAssetsFolder(<span class="string">"images"</span>);</span><br><span class="line">&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException(<span class="string">"Unable to find file."</span>, e);</span><br><span class="line">&#125; <span class="keyword">catch</span> (JSONException e) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException(<span class="string">"Unable to load JSON."</span>, e);</span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">    closeQuietly(stream);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</div><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a data-url="http://www.liujun.info/2017/04/25/Lottieåº“å®ç°ç›´æ’­ç¤¼ç‰©åŠ¨ç”»/" data-id="cj1wrinrw0005y9fyl83w98pr" class="article-share-link">åˆ†äº«åˆ°</a><div class="tags"><a href="/tags/Lottie-ç›´æ’­-åŠ¨æ€åŠ è½½-ç¤¼ç‰©-åŠ¨ç”»/">Lottie ç›´æ’­ åŠ¨æ€åŠ è½½ ç¤¼ç‰© åŠ¨ç”»</a></div><div class="post-nav"><a href="/2015/12/10/hello-world/" class="next">Hello World</a></div><div data-thread-key="2017/04/25/Lottieåº“å®ç°ç›´æ’­ç¤¼ç‰©åŠ¨ç”»/" data-title="Lottieåº“å®ç°ç›´æ’­ç¤¼ç‰©åŠ¨ç”»" data-url="http://www.liujun.info/2017/04/25/Lottieåº“å®ç°ç›´æ’­ç¤¼ç‰©åŠ¨ç”»/" class="ds-share flat"><div class="ds-share-inline"><ul class="ds-share-icons-16"><li data-toggle="ds-share-icons-more"><a href="javascript:void(0);" class="ds-more">åˆ†äº«åˆ°ï¼š</a></li><li><a href="javascript:void(0);" data-service="weibo" class="ds-weibo">å¾®åš</a></li><li><a href="javascript:void(0);" data-service="qzone" class="ds-qzone">QQç©ºé—´</a></li><li><a href="javascript:void(0);" data-service="qqt" class="ds-qqt">è…¾è®¯å¾®åš</a></li><li><a href="javascript:void(0);" data-service="wechat" class="ds-wechat">å¾®ä¿¡</a></li></ul><div class="ds-share-icons-more"></div></div></div><div data-thread-key="2017/04/25/Lottieåº“å®ç°ç›´æ’­ç¤¼ç‰©åŠ¨ç”»/" data-title="Lottieåº“å®ç°ç›´æ’­ç¤¼ç‰©åŠ¨ç”»" data-url="http://www.liujun.info/2017/04/25/Lottieåº“å®ç°ç›´æ’­ç¤¼ç‰©åŠ¨ç”»/" data-author-key="1" class="ds-thread"></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://www.liujun.info"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> åˆ†ç±»</i></div></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> æ ‡ç­¾</i></div><div class="tagcloud"><a href="/tags/Lottie-ç›´æ’­-åŠ¨æ€åŠ è½½-ç¤¼ç‰©-åŠ¨ç”»/" style="font-size: 15px;">Lottie ç›´æ’­ åŠ¨æ€åŠ è½½ ç¤¼ç‰© åŠ¨ç”»</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> æœ€æ–°æ–‡ç« </i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2017/04/25/Lottieåº“å®ç°ç›´æ’­ç¤¼ç‰©åŠ¨ç”»/">Lottieåº“å®ç°ç›´æ’­ç¤¼ç‰©åŠ¨ç”»</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/12/10/hello-world/">Hello World</a></li></ul></div><div class="widget"><div class="comments-title"><i class="fa fa-comment-o"> æœ€è¿‘è¯„è®º</i></div><div data-num-items="5" data-show-avatars="0" data-show-time="1" data-show-admin="0" data-excerpt-length="32" data-show-title="1" class="ds-recent-comments"></div></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> å‹æƒ…é“¾æ¥</i></div></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Â© <a href="/." rel="nofollow">LiuJun.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a><script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="/css/jquery.fancybox.css?v=0.0.0"><script>var duoshuoQuery = {short_name:'imliujun'};
(function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0]
        || document.getElementsByTagName('body')[0]).appendChild(ds);
})();
</script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create','UA-71377766-1','auto');ga('send','pageview');
</script><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?88a3cbe2051fe51ad73ae8e48687dcbd";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
  })();
</script><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>